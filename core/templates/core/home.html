{% extends "core/base.html" %}
{% load static %}
{% block title %}Home{% endblock %}
{% block content %}
<div class="row mb-4">
  <div class="col-12 text-center">
    <h1 class="display-5 fw-bold text-light">{{ site_settings.featured_title }}</h1>
    <p class="text-secondary">Curated classics with premium glassy vibes.</p>
  </div>
</div>

<div class="row g-4 mb-5">
  {% for product in featured_products %}
    <div class="col-6 col-md-3">
      {% include "catalogue/includes/product_card.html" with product=product %}
    </div>
  {% empty %}
    <p class="text-center text-muted">No featured products yet.</p>
  {% endfor %}
</div>

{% if featured_products.paginator.num_pages > 1 %}
  <div class="row mb-5">
    <div class="col-12">
      <nav aria-label="Featured products pagination" class="mt-3 mb-5">
        <ul class="pagination justify-content-center flex-wrap gap-2">
          {% if featured_products.has_previous %}
            <li class="page-item">
              <a class="page-link pagination-link" href="?page_featured={{ featured_products.previous_page_number }}" aria-label="Previous">
                <i class="bi bi-chevron-left"></i> Previous
              </a>
            </li>
          {% endif %}

          {% for num in featured_products.paginator.page_range %}
            {% if featured_products.number == num %}
              <li class="page-item active">
                <span class="page-link pagination-current">{{ num }}</span>
              </li>
            {% elif num > featured_products.number|add:'-3' and num < featured_products.number|add:'3' %}
              <li class="page-item">
                <a class="page-link pagination-link" href="?page_featured={{ num }}">{{ num }}</a>
              </li>
            {% endif %}
          {% endfor %}

          {% if featured_products.has_next %}
            <li class="page-item">
              <a class="page-link pagination-link" href="?page_featured={{ featured_products.next_page_number }}">
                Next <i class="bi bi-chevron-right"></i>
              </a>
            </li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
{% endif %}

<div class="row mb-3">
  <div class="col-12 d-flex justify-content-between align-items-center">
    <h2 class="h4 text-light">Top Rated</h2>
  </div>
</div>
<div class="row g-4 mb-5">
  {% for product in high_rated_products %}
    <div class="col-6 col-md-3">
      {% include "catalogue/includes/product_card.html" with product=product %}
    </div>
  {% endfor %}
</div>

{% if high_rated_products.paginator.num_pages > 1 %}
  <div class="row mb-5">
    <div class="col-12">
      <nav aria-label="Top rated products pagination" class="mt-3 mb-5">
        <ul class="pagination justify-content-center flex-wrap gap-2">
          {% if high_rated_products.has_previous %}
            <li class="page-item">
              <a class="page-link pagination-link" href="?page_rated={{ high_rated_products.previous_page_number }}" aria-label="Previous">
                <i class="bi bi-chevron-left"></i> Previous
              </a>
            </li>
          {% endif %}

          {% for num in high_rated_products.paginator.page_range %}
            {% if high_rated_products.number == num %}
              <li class="page-item active">
                <span class="page-link pagination-current">{{ num }}</span>
              </li>
            {% elif num > high_rated_products.number|add:'-3' and num < high_rated_products.number|add:'3' %}
              <li class="page-item">
                <a class="page-link pagination-link" href="?page_rated={{ num }}">{{ num }}</a>
              </li>
            {% endif %}
          {% endfor %}

          {% if high_rated_products.has_next %}
            <li class="page-item">
              <a class="page-link pagination-link" href="?page_rated={{ high_rated_products.next_page_number }}">
                Next <i class="bi bi-chevron-right"></i>
              </a>
            </li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
{% endif %}

<div class="row mb-3">
  <div class="col-12 d-flex justify-content-between align-items-center">
    <h2 class="h4 text-light">Featured Categories</h2>
  </div>
</div>
<div class="row g-3">
  {% for category in featured_categories %}
    <div class="col-6 col-md-4 col-lg-2">
      <div class="card-glass p-3 text-center">
        <i class="{{ category.icon }} fs-2 mb-2 text-warning"></i>
        <h3 class="h6 text-light mb-0">{{ category.name }}</h3>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}
