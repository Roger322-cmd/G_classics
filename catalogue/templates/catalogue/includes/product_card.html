<div class="card-glass h-100 d-flex flex-column">
  {% with main_image=product.images.all|first %}
    {% if main_image %}
      <img src="{{ main_image.image.url }}" class="card-img-top rounded-top" alt="{{ main_image.alt_text }}">
    {% endif %}
  {% endwith %}
  <div class="p-3 d-flex flex-column flex-grow-1">
    <div class="d-flex justify-content-between align-items-start mb-2">
      <h5 class="card-title text-light mb-0">{{ product.name|truncatechars:30 }}</h5>
      {% if product.is_featured %}
        <span class="badge-featured">Featured</span>
      {% endif %}
    </div>
    <p class="text-secondary small mb-2">{{ product.category.name }}</p>
    <div class="d-flex align-items-center mb-2">
      <span class="text-warning me-1">
        <i class="bi bi-star-fill"></i>
      </span>
      <span class="small text-light">{{ product.rating|default:"0.0" }}</span>
    </div>
    <div class="mt-auto d-flex justify-content-between align-items-center">
      <span class="fw-bold text-light">Ksh {{ product.base_price }}</span>
      <a href="{% url 'catalogue:product_detail' product.slug %}" class="btn btn-sm btn-primary">View</a>
    </div>
  </div>
</div>
